<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stats of match</title>
    <link rel="stylesheet" href="css/base.css">
</head>
<body>
    <header>
        <h1 class="rubik-700 texto">
            cricket live stats
        </h1>
    </header>

    <div class="dados">
        <h1 class="rubik-500 texto" > Dados da partida: </h1>
        <h2 class="rubik-500 texto" id="matchTitle">Jogo:  </h2>
        <h2 class="rubik-500 texto" id="status"> Status: </h2>
        <h2 class="rubik-500 texto" id="idJogo"> ID: </h2>
        

    </div>
    
    
</body>
<script>

    // pegando o ID atráves do parametro da URL
    const params = new Proxy(new URLSearchParams(window.location.search), {
    get: (searchParams, prop) => searchParams.get(prop),
    });
    // Get the value of "some_key" in eg "https://example.com/?id=ID"
    let ID = params.id; // "ID"
    async function fetchScorecard(eventId) {
    try {
        const response = await fetch(`https://lsc.fn.sportradar.com/common/en/Etc:UTC/cricket/get_scorecard/${ID}`);
        const scoreData = await response.json();
        
        match = scoreData.doc[0].data.score

        switch(match.matchStatus){
            case 0:
                status = "Não iniciado"
                break
            case 1:
                status = "Em andamento"
                break
            case 2:
                status = "Em andamento"
                break
            case 3:
                status = "Finalizado"
                break
            default:
                status = "indefinido"
        }

        console.log(match)

        document.getElementById('matchTitle').innerText += " " + match.matchTitle || 'Partida';
        document.getElementById('status').innerText += " " + status || 'Partida';
        document.getElementById('idJogo').innerText += " " + ID || 'Partida';

        setTimeout(function () {
            location.reload()
        }, 30000);

    } catch (error) {
        console.error('Erro ao buscar scorecard:', error);
        setTimeout(function () {
            window.location.reload()
        }, 30000);
        ;
    }
    }
    
document.addEventListener('DOMContentLoaded', fetchScorecard);
</script>
</html>